!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.midiEvents=t()}}(function(){var t;return function e(t,n,o){function r(u,i){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!i&&c)return c(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var p=n[u]={exports:{}};t[u][0].call(p.exports,function(e){var n=t[u][1][e];return r(n?n:e)},p,p.exports,e,t,n,o)}return n[u].exports}for(var a="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,n,o){t(["Device","PubSub"],function(t,e){"use strict";function n(t){w.then(function(n){I=n,O=s(I.inputs.values()),j=s(I.outputs.values()),e.trigger("connected"),"function"==typeof t&&t()},d)}function o(t){return i("input",t)}function r(t){var e,n=o(t),r=n.length;for(e=0;r>e;e++)n[e].addEventListener("midimessage",u,!1)}function a(t){var e,n=o(t),r=n.length;for(e=0;r>e;e++)n[e].removeEventListener("midimessage",u,!1)}function u(t){var n={port:c("id",t.target.id),type:"unsupported",channel:0};switch(n.note=t.data[1],n.value=t.data[2],n.originalEvent=t,!0){case t.data[0]<128:break;case t.data[0]<144||t.data[0]<160&&0===t.data[2]:n.type="noteoff",n.channel=t.data[0]-(t.data[0]>143?144:128);break;case t.data[0]<160:n.type="noteon",n.channel=t.data[0]-144;break;case t.data[0]<176:n.type="polyphonic-aftertouch",n.channel=t.data[0]-160;break;case t.data[0]<192:n.type="controller",n.channel=t.data[0]-176;break;case t.data[0]<208:n.type="controlchange",n.channel=t.data[0]-192,n.note=0,n.value=t.data[1];break;case t.data[0]<224:n.type="aftertouch",n.channel=t.data[0]-208,n.note=0,n.value=t.data[1]}e.trigger("message",[n]),e.trigger(n.type,[n]),e.trigger(n.type+":"+n.note,[n]),e.trigger("port:"+n.port,[n]),e.trigger("id:"+t.target.id,[n]),e.trigger("id:"+t.target.id+":"+n.type,[n])}function i(t,e){var n,o="output"===t?j:O,r=[],a=[];if("number"==typeof e?e<o.length&&a.push(o[e]):Object.prototype.toString.call(e).match(/^\[object MIDI(Input|Output)]$/)?a.push(e):"[object Array]"===Object.prototype.toString.call(e)?r=e:("string"==typeof e&&"all"===e.toLowerCase()||void 0===e)&&(a=o),r.length>0)for(n=0;n<r.length;n++)"number"==typeof r[n]?r[n]<o.length&&a.push(o[e]):Object.prototype.toString.call(r[n]).match(/^\[object MIDI(Input|Output)]$/)&&a.push(r[n]);return a}function c(t,e){return p("input",t,e)}function f(t,e){return p("output",t,e)}function p(t,e,n){var o,r="output"===t?j:O,a=r.length,u=[];for(o=0;a>o;o++)r[o].hasOwnProperty(e)&&r[o][e]===n&&u.push(r[o]);return u}function l(t,e,n){var o,r,a=outputs(t);for("[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),o=0;o<e.length;o++)switch(e[o].type){case"noteon":e[o].type=144;break;case"noteoff":e[o].type=128}for(o=0;o<a.length;o++)for(r=0;r<e.length;r++)a[o].send([e[r].type,e[r].note,e[r].value],void 0===n?window.performance.now():n)}function s(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function d(t){console.log(t)}function g(t){e.on("noteon",t)}function h(t){e.on("noteoff",t)}function v(t){e.on("controller",t)}function y(e,n){return new t(e,n)}var b={},m=!!window.navigator.requestMIDIAccess,w=m?navigator.requestMIDIAccess():null,I=null,O=[],j=[];return b={supported:m,connect:n,inputs:o,outputs:outputs,listen:r,unlisten:a,send:l,resolveInputPort:c,resolveOutputPort:f,createDevice:y,on:e.on,off:e.off,noteon:g,noteoff:h,controller:v}})},{}]},{},[1])(1)});